# 比特币扩展

<https://www.binance.com/zh-CN/news/top/7435064>

比特币规定了每个区块的容量大小不能超过1M，包含的交易数最多不超过几十笔，十分钟出一个块，平均每秒可处理 7 笔交易，6 个可信区块后大约一小时才能确认

随着用户和需求的激增，手续费异常的贵，网络变得异常拥堵，迫切地需要一种高效的技术方案在不违背安全的情况下来解决这个问题

- 无升级式扩容
- 升级式扩容
- 侧链技术
- 单程转账

无升级式扩容无法同时实现强扩展性和账本安全性，侧链存在中心化的问题，升级式扩容实现难度大，单程转账在四个评价维度上看相对较好，但未受到市场的广泛关注

在过去的十年中，比特币是为了去中心化货币的目标而创建，价值存储已被证明是其核心的作用，理论上不需要任何扩展来实现这一目标。如何在保持比特币储值能力的同时进行规模化，甚至在挖出2100万枚后，实现未来的可持续性发展，无疑将是比特币未来发展的主要方向

## Lightning Network

> [闪电网络简史](https://www.theblockbeats.info/news/31352)

![20230510225325](http://image.zuoright.com/20230510225325.png)

闪电网络属于工作在比特币上的二层支付协议，凭借理论上 `无限TPS + 即时支付 + 超低费用 + 安全 + 较为去中心化` 的特性被寄予厚望

闪电网络的TPS（Transaction PerSecond）远超市面上所有区块链技术，交易的成本非常低，没有区块大小限制

> [读懂闪电网络原理](https://www.8btc.com/article/362358)

- RSMC(Recoverable Sequence Maturity Contract) 序列到期可撤销合约
- HTLC(Hashed Timelock Contract) 哈希时间锁定合约

理解闪电网络主要分为两步，一是理解双向支付通道，二是诸多通道扩展成闪电网络。

假设 Alice 向 Bob 转账 1 BTC

### 传统做法

是Alice可以挑选出其未花费的输出用对应私钥签名，并向比特币网络广播，矿工验证打包，一般来说6个区块之后即可确认交易。这个过程很慢，需要等待一个小时左右，并且还要支付给矿工的手续费。

### 闪电网络

- 开启通道，链上锁定资金

Alice 和 Bob先各自把 5个BTC 转给一个由两人共同控制的多重签名地址，和普通交易是一样需要上链的，多钱地址中有 10个BTC

如果 Alice 还想向 C 转账，可以再建立一个支付通道，但如果 Bob 和 C 之间有支付通道，则可以利用 Bob 作为路由来重复利用现有的两个通道实现，Bob 可以收取一点路由费，基于此，节点越多，通道越多，就组成了一个闪电网络。

- 通道中链下交易

双方各自记账

- 关闭通道，链上结算资金

正常关闭，即两人从多钱地址向各自钱包转相应数量的比特币，双方的旧账一笔勾销

单方强制关闭，毁约者会延迟到账，延迟时间是提前定好的，比如1000个区块

篡改账本并强制关闭，则欺诈方首先毁约会延迟到账，而受害方会立即到账，并且可以取走所有比特币

### 闪电网络钱包

- Wallet of Satoshi
- Strike
- BlueWallet

### Omni

Omni Foundation 制定了闪电网络协议规范 BOLT（Basis of Lightning Technology），通过在协议级别, 在不改变比特币基础、不产生替代技术来处理新规则的情况下，使用现有比特币构建了具有新程序的新货币层（Omnilayer），OmniLayer 建立在比特币之上，支持智能合约和发行 Token 等功能，USDT 最早就是基于 OmniLayer 发行的。

## Statechains

一种用于BTC链下转移的扩容技术，它与闪电网络类似，但又不完全相同

## SegWit

2017 SegWit（Segregated Witness）隔离见证上线，使闪电网络进入应用阶段

比特币的每笔交易信息分为两个部分

- 基础交易数据，记录账户资金结余
- 见证数据，用于验证用户身份的签名信息

据统计，见证数据在区块中占用了约 65% 的空间，而这部分数据对于交易并不重要，因为接收方只需要明确资产是否收到，并不需要知晓发起方的详细信息，所以将其隔离出来，在区块大小不变的情况下，使得区块空间可容纳更多的基础交易数据，并且提升了安全性

## Taproot

2021.11.14 上线

Taproot 是一次优化比特币脚本的软分叉，提升私密性、效率以及网络处理智能合约的能力。是自2017年SegWit升级之后，公认的比特币重大升级。

<https://academy.binance.com/zh/articles/what-is-taproot-and-how-it-will-benefit-bitcoin>

## 侧链技术

侧链是独立于主链外的一条链，可以与主链有不一样的共识机制，通过桥接与主链交互，用户将资产转移到侧链指定的合约地址锁仓，根据设定的比例将主链资产兑换成侧链上的资产，在侧链上流通，最后再兑换回主链释放。

- 锚定侧链，通过常规的双向桥接实现，侧链与主链沟通的过程被称为成为“双向锚定”（也称“双向挂钩”，2WP）
- 联邦侧链，在双向桥接基础上增加一个多签组织，负责中间信息交互验证

由于侧链的独立，它的打造成本相对要更高，账本共识依赖于某些中心化机构的管理，导致去中心化程度低，安全性也有待商榷，这可能是侧链扩容解决方案经过多次尝试但尚未实现大规模采用的主要原因

### Stacks

Stacks 可以看作是比特币的 Layer2，发行了自己的代币 $STX

其 PoX 协议是一种允许矿工通过质押 STX 进而来质押 BTC 的协议。然而，该协议如何实现去中心化分发仍有待研究

### Rootstock/RSK

比特币上的一条兼容EVM的侧链，它和比特币使用相同的SHA-256算法，比特币矿工在进行挖矿的时候可以进行“合并挖矿”（Merged Mining），不需要额外的资源消耗，同时可以获得Rootstock中的交易手续费收入，BTC的跨链传输由多个机构的多重签名来进行控制

原生代币是一种比特币锚定币 Smart BTC（rBTC），也用于支付交易的手续费

RIF 是一个建立在 Rootstock 之上的平台，由同一家公司 IOV Labs 开发，旨在为开发者提供区块链基础设施和服务，包括域名、存储、身份验证等，RIF 发行有自己的代币 $RIF

### Liquid Network

由 BlockStream 2018.9 推出的一种侧链技术，它由包括交易所、金融机构以及其它以比特币为重点的公司组成的 Liquid 联合委员会维护和治理，像是一个由大型机构组成的比特币联盟链，侧链与主网之间的 BTC 映射和转换需要这些机构的多重签名协议

Liquid Network 上主要使用的仍然是由比特币1:1锚定发行的 L-BTC

### Drivechain

是一个比特币开放式侧链协议，可以根据不同的需求定制不同的侧链。它的设计来自于两个比特币改进提案，BIP 300“哈希率托管”（Hashrate Escrows）通过“Container UTXOs”将3-6个月的交易数据压缩成32字节，BIP 301“联合盲挖”（Blind Merged Mining）。

## 无升级式扩容

- RGB，用于比特币和闪电网络的可扩展和保密的智能合约系统
- Taro
- DLC
- Nostr，具有闪电网络集成的去中心化数据共享协议，类似Twitter的去中心化社交平台Damus便是基于这个，[一个解读](https://mirror.xyz/0x22fFb47cb60FFbe669786AA1a8bAf6597ac935b2/kXuvmOjrFFkeBBNMWvXirhXsJT79G1ranzs8jw4Ku4Q)
- Ordinals
