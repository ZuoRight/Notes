# 网络协议

协议三要素：语法、语义、顺序

可以没有上层，但一定有下层。上层一定是基于下层的。

RTT往返

## IP

配置IP

DHCP动态主机配置协议会分配一个地址

查看IP

Windows: `ipconfig`
Linux/Mac: `ifconfig`(net-tools) 或者 `ip addr`(iproute2)

IPv4地址由32位构成，使用CIDR（无类型域间选路）的方式一分为二，即网络号和主机号
最常用的私有IP地址：192.168.0.x/24（表示）
/24（CIDR形式之一），表示32位中，前24位为网络号（即192.168.0），后8位为主机号（即.x）
子网掩码：255.255.255.0
出口地址：192.168.0.1（电脑连接WiFi，路由器的地址就是这个）
广播地址：192.168.0.255（发送到这个地址，整个网络的机器都能收到）
IP+子网掩码可以得到网络号
lo(loopback，又称环回接口)，往往会被分配到 127.0.0.1 这个地址

MAC物理地址，全局唯一，跟随网卡诞生

一个网络包要从一个地方传到另一个地方，除了要有确定的地址，还需要有定位功能。 而有门牌号码属性的 IP 地址，才是有远程定位功能的。MAC 地址更像是身份证，是一个唯一的标识
MAC 地址的通信范围比较小，局限在一个子网里面

知道那台机器的 IP 地址了，直接发给他消息呗，要 MAC 地址干啥？这里的关键就是，没有 MAC 地址消息是发不出去的。

这里要记住一点：只要是在网络上跑的包，都是完整的。可以有下层没上层，绝对不可能有上层没下层。

1. mac地址是唯一的，为什么可以修改?想想身份证，身份证号是唯一的，不能改变的，但是可以造价。mac地址全球唯一，它是固化在网卡里的。网卡毕竟是个硬件，需要软件支持，既操作系统识别。重点来了，操作系统识别出来的mac地址是可以更改的，它只不过是一个字符串。我们常说的修改mac指的是修改电脑中记录的既注册表中的记录。
2. 有了mac地址为什么还要有ip地址。举个例子，身份证号是你的唯一标识，不会重复，一落户就有（网卡一出厂就有mac）。现在我要和你通信（写信给你），地址用你的姓名+身份证，信能送到你手上吗?明显不能！身份证号前六位能定位你出生的县。mac地址前几位也可以定位生产厂家。但是你出生后会离开这个县（哪怕在这个县，也不能具体找到你）。所以一般写个人信息就要有出生地和现居地址了。

