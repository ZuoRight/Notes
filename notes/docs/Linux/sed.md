# 文本编辑器

vim属于全文本编辑器，是交互式的

sed 和 awk 属于流/行文本编辑器，是非交互式的。sed常用于把不规范的文本处理为规范的文本，而awk常用于处理规范的文本，比如配置文件等，常作为sed的补充，但其本身非常强大，可以算是一种编程语言。

## 替换指令

`sed -参数 '/reg/寻址s/old/new/标识位' filename1 filename2 ...`

- 为了防止元字符被解释为通配符，一般用单引号做引用
- 分割线/也可以换成其他的
- filename 后面可以加 > 输出重定向到其他文件
- new如果为空，则相当于删除

参数

- 默认显示所有行，加 -n 仅返回处理过的行  
- 默认只是预览，加 -i 才会对文件实际修改  
- 默认old可以是正则表达式，加 -r 后old可以用扩展正则表达式

标识位

- 默认只处理每行第一次匹配到的字符，加g后则是全局匹配

寻址

- n：第n行
- $：最后一行

- n,m：第n行到第m行
- n,m!：非第n行到第m行
- n~x：从第n行开始，每隔x行匹配一次

- ,+x：匹配行+x行
- ,$ ：匹配行到最后一行

## 多指令

`sed -e 's/old/new/' -e 's/old/new/' filename`

`sed 's/old/new/;s/old/new/' filename`

`sed '/正则表达式/{s/old/new/;s/old/new/}' filename`

## 脚本文件

`sed -f 脚本文件 filename`

## 其它

`sed '/xx/n'` 下一行

`sed '/xx/p'` 打印，常与-n共用

`sed '/xx/='` 打印行号

## 多行处理

即将多行合并为一行后再处理

### 模式空间

N 将下一行合并到匹配行
N;N 将下两行合并到匹配行

D 删除模式空间中第一个字符到第一个换行符

P 打印模式空间中第一个字符到第一个换行符

### 保持空间

- 将模式空间内容存放到保持空间
  - h 覆盖
  - H 追加

- 将保持空间内容取回到模式空间
  - g 覆盖
  - G 追加

- 交换模式空间和保持空间内容

## 追加

a 可以使用\n达到追加多行的目的
