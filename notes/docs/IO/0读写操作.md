# 文件操作

使用Python的内置函数`open()`来操作文件

> 文档：<https://docs.python.org/zh-cn/3.10/library/functions.html#open>

- 打开文件，返回一个文件对象
- 进行读写操作
- 关闭文件

```python
f = open(filename, mode="r", encoding='utf_8', errors='ignore')
"""
mode 操作模式
encoding 操作非utf_8编码文件时需要指定编码格式
errors 如果夹杂非法编码字符，默认忽略处理，也可以自定义
"""

f.read()  # 读取
f.write()  # 写入
f.close()  # 关闭文件，防止文件泄露或破坏
```

支持with语句触发上下文管理器，自动关闭，自动处理异常

```python
with open(filename1, mode) as f:
    f.read()
```

## 操作模式

操作

- `r` 只读（默认），文件不存在则报错
- `x` 新建，文件不存在则新建，存在则报错
- `w` 只写，文件不存在则新建，存在则清空
- `a` 追加，文件不存在则新建，存在则追加

类型

- `t` 文本模式（默认），可省略，`r`与`rt`等价
- `b` 二进制模式，读写bytes数据，比如Excel、图片、视频等，`rb`、`wb`、`ab`

> office文件其实是个压缩包，由很多.xml和其他文件构成，所以属于二进制

更新/读写模式，较少使用

- `r+`、`rb+`、`w+`、`a+`

## 关于编码

> <https://docs.python.org/3/library/codecs.html#standard-encodings>

Python3默认为`utf_8`编码，可用`_`替代`-`，可忽略大小写

所以这些别名也都有效：`utf-8`, `utf8`, `UTF-8`, `U8`, `UTF`, `cp65001`，但使用别名可能会导致执行速度变慢

## 操作

- 读操作

```python

f.read()  # 读取全部
f.read(size)  # 读取指定字符

# 读取全部，按行存入list
f.readlines()
# 会把每行后面的回车"\n"也读到，可以这样处理
for line in f.readlines():
    print(line.strip())
```

- 写操作

```python
f.write()
```
