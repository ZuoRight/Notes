# 文件系统

查看当前目录所有文件（-a 包含隐藏文件）：`ls -al`

![20210821163302](http://image.zuoright.com/20210821163302.png)

## 类型字段

- `d` 目录
- `-` 文件：纯文本文件(ASCII)、二进制文件(binary)、数据文件(data)
- `l` 链接：类似Windows的快捷方式
- `b` 设备与设备文件（通常集中存放在`/dev/...`，比如硬盘与软盘等区块文件(`/dev/sda`)
- `c` 鼠标键盘等串行端口设备
- `p` 数据传送文件，FIFO(先进先出)，即管道(pipe)
- `s` 数据接口文件，sockets

## 权限字段

- 身份：`owner`、`group`、`others`
- 权限：r(`read` 4)、w`(write` 2)、x(`execute` 1)、-(不可读/写/执行)

> root用户不受权限限制，无论什么权限都可读写

在Windows中文件是否可执行由后缀决定，在Linux中则由权限x决定，不过拥有可执行权限不代表真的可以执行，还是得看文件内容是否为可执行代码才行

> 虽然扩展名没什么用，但通常用来区分不同用途，比如`*.sh`、`*.tar`、`*.html`等

如果想rwx某个目录内的文件，则必须要拥有目录的x权限才行。

> 比如要删除目录内某文件，首先要有目录的x权限进入目录，然后要有目录的w权限删除文件（不管文件本身什么权限，文件的w权限只是可编辑写入文件的权限，并不能删除文件）

修改权限：

1. `chmod 755 filename` 7=4+2+1 表示r+w+x权限全开
2. `chmod u=rwx,go=rx filename` ugo分别表示user group other
3. `chmod a+x filename` a表示给所有人加上（去掉用-）执行权限

修改文件拥有者：

- `chown root:root filename` 将文件拥有者和用户组改回root
- `chgrp [-R] user dirname` 将目录（-R 递归子目录）的用户组改为user

## 其它字段

- 有多少文件名链接到此节点
- 拥有者
- 所属用户组
- 文件容量大小（Bytes）
- 创建/最近修改日期
- 文件名

## 目录

目录主要记录文件名列表，类似于抽屉，不同的目录依据FHS标准有不同的用途

![20210821215536](http://image.zuoright.com/20210821215536.png)

目录树

![4d8207054d6d55daab264f050e11515](http://image.zuoright.com/4d8207054d6d55daab264f050e11515.jpg)

- `/usr` Unix Software Resource 主要存放系统软件资源文件，而不是用户的数据
- `/usr/local` 类似Windows的`C:/Progrem Files/`，存放一些自编译的软件
- `/opt` 类似Windows的`D:/Software`，存放一些第三方软件
- `/etc` 存放配置文件，比如`/etc/profile`
- /`etc/opt` 存放第三方软件的配置
- `/var`  存放一些缓存日志等文件

简写：

- `.` 当前目录
- `..` 上层目录，根目录`/`的上层目录即当前目录
- `-` 前一个目录
- `~`  家目录，`~chonge` chonge的家目录，系统管理员的家目录是`/root`

## 配置文件

配置文件是在用户登录(`su - username`)时加载的

![e4da92fd9a72e844053abca2d931f2d](http://image.zuoright.com/e4da92fd9a72e844053abca2d931f2d.jpg)

图中实线为主流程，即加载顺序为：`/etc/profile` => `~/.bash_profile`，虚线为被调用的配置文件

## 操作

```bash
# 显示工作目录 print working directory
# -P 显示link文件的真实目录
pwd [-P]

# 创建目录 make directory
# -p 递归创建多层，-m 设置权限，默认权限为
mkdir [-p ][-m 711] dirname/subdir

# 删除目录 remove directory
# -p 递归删除，删除非空目录需要加-r
rmdir [-p] [-r] dirname

# 切换目录 change directory
# 不带选项则默认回到家目录
cd [dirname]

# 创建空文件
touch filename

# 复制文件 copy
cp 源文件 目标文件  
```
