# 操作

```python
"""
x = "123"
x = (1,2,3)

x = [1, 2, [31, 32]]
x  = {1,2,3}
x = {"a":1,"b":2,"c":3}
"""
```

## 复制

- 对于字符串都是引用
- 对于元组，只有深拷贝才不是引用，否则都是引用

以下x为可变数据类型

### 引用

```python
# id(y) == id(x)
# x赋值给y，y只是x的一个引用，会跟着x的改变而改变
y = x
```

### 浅拷贝

- 工厂函数`.copy()`

```python
# id(y) != id(x)
# 只能拷贝父级元素，即改变x的父级元素，y的父级元素不会变
# 子级元素仍为引用，即改变x的子级元素，y的子级元素也会变
y = x.copy()
```

- `copy.copy()`函数

```python
import copy
y = copy.copy(x)
```

- 列表的切片操作也是浅拷贝：`_list[:]`

### 深拷贝

```python
# id(y) != id(x)
# 父级与子级元素都会被拷贝，即改变x任意元素，都不会影响y的元素改变
import copy
y = copy.deepcopy(x)
```

## 清空

```python
_list.clear()
_set.clear()
_dict.clear()
```

## 增

- list

```python
_list.append(x)  # x被当作一个整体，添加到末尾

_list.extend(x)  # x（必须为可迭代的），会被当作一组，组中元素按序添加到末尾

_list.insert(index, x)  # x被当作一个整体，插入到指定位置
```

- set

```python
_set.add(key)
```

- dict

```python
_dict["new_key"] = new_value
```

## 删

- list

```python
_list.pop()  # 删除末位
_list.pop(index)  # 删除指定位置

_list.remove("x")  # 删除指定元素（如有重复，删除第一个）
```

- set

```python
_set.pop()  # 随机删除

_set.remove(key)  # 删除指定元素
```

- dict

```python
_dict.popitem()  # 删除末位，并返回被删除的键值对
_dict.pop(key)  # 删除指定key，并返回被删除key对应的值
```

- del方式删除，释放内存

```python
del _tuple
del _list
del _set
del _dict

del _list[m:n]  # 删除list切片
del dic[key]  # 删除dict指定key
```

## 改

- list

```python
# 修改指定位置元素
_list[-1] = x
```

- set

```python
# 先删除，再增加？
_set.remove(key1)
_set.add(key2)
# 或者转换为list替换后再转换为set
```

- dict

```python
# 同增加
_dict["old_key"] = new_value
```

## 查

> 如果是想判断一个元素是否存在，可以用成员运算符判断

- tuple 和 list

```python
# 元组与列表均支持索引和切片，性能几乎没有差别
_tuple[1]
_tuple[1:3]

_list[1]
_list[1:3]
```

```python
# 查询item的索引位置（如果item重复，返回第一个）
l.index(item)
```

- dict

```python
_dict[key]  # key不存在会报错

_dict.get(key)  # key不存在则返回None

_dict.setdefault(key) # key不存在则自动添加{key:default}，返回None
_dict.setdefault(key, value) # key不存在则自动添加{key:value}，返回value

# 以下都不接受参数
_dict.items()  # dict_items([('k1', 'v1'), ('k2', 'v2'), ('k3', 'v3')])
_dict.keys()  # dict_keys(['k1', 'k2', 'k3'])
_dict.values()  # dict_values(['v1', 'v2', 'v3'])
```

## 统计

```python
# 统计iterable元素的个数
len(_iter)

# 统计iterable中值最大的
max(_iter)

# 统计iterable中值最小的
min(_iter)

# 统计str/tuple/list中某元素出现的次数
_tuple.count(x)
_list.count(x)
```

## 排序

```python
# 元素类型要一致可排，否则报错
# 均会以list形式返回
# 原对象不变
sorted(_iter)  # 正序
sorted(_iter, reverse=True)  # 倒序
```

```python
sorted(_dict.items(), key=lambda x:x[0])  # dict按key排：[('a', 3), ('b', 1), ('c', 2)]
sorted(_dict.items(), key=lambda x:x[1])  # dcit按value排：[('b', 1), ('c', 2), ('a', 3)]
```

```python
# 列表自带排序方法
# 原对象会被改变
_list.sort()
_list.sort(reverse=True)
```

## 反转

```python
# reversed()可以反转str/tuple/list
# 反转后得到一个迭代器，可以转化成tuple/list
# 原对象不变
reversed(x)
```

```python
# 列表自带反转方法
# 原对象会被改变
_list.reverse()

# 切片方式反转
# 原对象不变
_list[::-1]
```
