# 正则表达式

正则表达式(Regular Expression)，简称正则(RE)。

功能非常强大，可以：

- 查找符合要求的文本内容
- 对文本进行切割替换等操作
- 校验数据的有效性

但学会之后一定要克制。

- 最好要写注释，于人于己都是好事
- 能用普通字符串处理的，坚决用普通字符串处理
- 尽量将一个复杂的正则，分解为多个简单的正则

## 流派

常用的正则可以分为：

- POSIX流派
  - GNU BRE(基础正则)：`(), {}, +, ?, |`需要转义，比如grep、sed
  - GNU ERE(扩展正则)：无需转义，比如awk，egrep
- PCRE流派：支持`\d、\w、\s`等字符组，比如各种编程语言

`egrep`其实就是`grep -E`，可以使用扩展正则

`sed -r`可以使用扩展正则

## shell中的通配符

- `*` 匹配任意字符，个数也任意，可单独使用
- `?`

## 元字符

- . 匹配任意单个字符(换行符除外)
- X* 匹配任意个X字符
  - 必须与前面的X合用
  - X如果为点，即 .*，则相当于通配符的星号
- ^ 拖字符，匹配开头
- $ 刀叻符，匹配结尾

## 转义字符 \

- \d（digital） 数字
- \w（word） 数字字母汉字下划线
- \s（space） 空

## 扩展元字符

- \+ 至少1次，即>=1
- ? 至多1次，即<=1
  - 正则表达式默认为贪婪匹配，加个?可以变为非贪婪匹配
- {n} n个字符
- {n,m} n~m个字符

- [] 中括号，匹配中括号中的任意一个字符
  - 比如用来匹配大小写 [Hh]ello
- a|b 匹配a或b

## Python中的正则表达式

Python的字符串本身也是用\转义，为避免与正则表达式的转义混淆，所以强烈建议使用r"xxx"形式

import re

验证 re.match(正则, 字符串)

匹配则返回一个Match对象，否则返回None

分组 正则中可以用()分组，然后用group()提取分组

groups() 元组形式返回所有分组

group(0) 永远是原始字符串

group(1) 第1个分组

切分 re.split(正则, 字符串)

返回一个字典

举例 r"[\s\,\;]+" 可以在空格/逗号/分号处分割
