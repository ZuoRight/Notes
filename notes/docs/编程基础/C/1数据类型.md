# 数据类型

## 数组

一组按顺序连续存储的同类型值，可变

```c
/*
  声明一个int型数组，数组长度（成员数量）5，即包含5个int类型的值，默认都是0
  声明时可以用变量定义数组长度，即变长数组，长度可以不固定
*/
int scores[5];
scores[0];  // 引用第一个值
scores[3] = 111;  // 给index=3处赋值，注意：越界不会报错

int board[2][5];  // 二维数组

int x[5] = {22, 37, 3490, 18, 95};  // 声明并赋值，此时可省略数组长度

/*
  sizeof可以返回字节长度，用总字节长度除以一个字符的字节长度，即可得到字符长度/数量
  sizeof返回值的数据类型是size_t，需要用%zu或%zd占位
*/
printf("%zu", sizeof(x) / sizeof(int)); // 5=20/4
```

## 字符串

C语言没有单独的字符串类型，字符串实际是字符（char）类型的数组

```c
char* s = "Hello";  // 指针方式声明，不可以修改，可以指向另一个字符串

char s[] = "Hello";  // 数组的方式声明，可以修改，但是不能指向另一个字符串，{'H', 'e', 'l', 'l', 'o'}

#include <string.h>
printf("%zd", strlen(s));  // 返回字符串字节长度，5
printf("%d", sizeof(s));  // 字节长度，6，每个字符串末尾会自动加一个结束符\0（一个全是二进制0的字节）
```

## struct

C语言没有类/对象，struct就类似于其他编程语言的class/object

自定义结构体，可包含不同类型的值

```c
// 自定义数据类型fraction
struct fraction {
  int numerator;
  int denominator;
};

// 声明一个fraction类型的变量f1
struct fraction f1;  // 不能写成fraction f1

// 赋值
f1.numerator = 22;
f1.denominator = 7;
```

## union

可以变换数据类型的自定义类型

```c
// 自定义union类型，包含三个不同属性，但同时只能取其中一个（最后被赋值的）属性的值
union quantity {
  short count;
  float weight;
  float volume;
};

union quantity q;
q.count = 4;  // 想取某个属性的值，就需要先给它赋值
```

## enum

枚举类型

```c
// 内部常量名通常大写
enum colors { RED, GREEN, BLUE };
printf("%d\n", RED); // 0
```

## 数据类型起别名

关键字`typedef`可以为数据类型起别名

```c
// 简化，方便引用和提高可读性，比如给自定义类型起别名
typedef struct animal {
  char* name;
  int leg_count, speed;
} animal;

// 方便日后修改变量类型
typedef float app_float;
app_float f1, f2, f3;
typedef long double app_float;  // 修改f1, f2, f3的类型只需要重申typedef语句
```

## 变量说明符

- const

变量变为只读，不可被修改

- static

对于局部变量，每次函数执行结束后不会被系统自动清理，而是保留

对于全局变量，限制变量只能用于当前文件，不能被其他文件引用
