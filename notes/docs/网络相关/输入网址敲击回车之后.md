# 输入网址，敲击回车之后

示例URL：<https://example.com/>

> URL 统一资源定位符
>
> URI（统一资源标识符，它可以是一个文件名、CGI程序、或者就是URL等任何访问目标，这些目标统称为URI）

浏览器解析URL可知域名和协议

## 应用层

使用DNS/HTTPDNS协议查找到IP地址为：93.184.216.34

然后使用HTTP/HTTPS协议封装后将数据包从应用层交给传输层

## 传输层（socket 编程）

UDP

TCP（浏览器监听端口、服务器监听端口）

传输层封装完毕后，浏览器会将包交给操作系统的网络层

## 网络层

IP协议，得到目标/服务器IP：xxx

判断目标地址是本地IP还是公网IP

如果是公网，则通过ARP协议（也就是已知IP地址，求MAC地址）获取网关MAC地址交给网关

> 操作系统启动的时候，DHCP协议会配置本机IP和默认网关的IP(192.168.1.1)

## 链路层

网关（一般是路由器）通过路由协议（常用的有 OSPF 和 BGP）按路由表将数据包发出

## 物理层

交换机越来越多，会造成环路和安全问题，STP协议用来解决环路问题，VLAN（虚拟局域网）用来解决广播和安全问题

---

当网络包平安到达 TCP 层之后，TCP 头中有目标端口号，通过这个端口号，可以找到网站的某个进程正在监听这个端口号，然后分析请求和请求体，通过RPC框架调用给不同的进程

> RPC 框架有很多种，有基于 HTTP 协议放在 HTTP 的报文里面的，有直接封装在 TCP 报文里面的
