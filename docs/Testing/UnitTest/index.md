# 单元测试

单元测试（Unit Testing）又称为模块测试

将程序分解成独立的可测试的模块，一般是函数、方法、类等代码组织单元，然后对这些单元模块进行正确性检验的测试。

良好的单元测试可以视为一种文档，显示函数或方法应该如何使用，以及在给定输入时应该返回什么。

## 原则

3A + 清理

- 准备（Arrange），初始化测试对象，准备测试数据
- 执行（Act），调用被测方法
- 断言（Assert）
- 清理（Clear）

## 覆盖率

插桩

代码覆盖率是度量测试是否全面的指标之一

但不要过分关注测试覆盖率，单元测试不应该包罗万象，不同粒度的测试应该关注不同的点，它们之间是互补的关系

## 框架

- Java：`JUnit`、`TestNG`
- JS：`Mocha + Chai`
- Python：`Unittest`、`Pytest`

| 特性          | unittest                                  | pytest                               |
|--------------|-------------------------------------------|-------------------------------------|
| 类型         | 标准库                                     | 第三方库                                 |
| 风格         | 面向对象（基于类和方法）                      | 函数式，也支持类和方法                      |
| 断言样式      | 特定名称的断言方法  | Python 内置的 assert                     |
| 测试发现机制   | 支持自动发现                               | 强大的自动发现                             |
| 前置/后置装饰  | setUp() 和 tearDown()                     | 灵活的 fixture 系统                       |
| 插件生态系统   | 较少的第三方插件                            | 丰富的插件生态                             |
| 适用场景      | 适用于熟悉 xUnit 架构的开发者                | 适用于各种规模的项目                        |
